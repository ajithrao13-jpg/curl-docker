stages:
  - validate

validate_sql_syntax:
  stage: validate
  image: mcr.microsoft.com/mssql-tools
  script:
    - echo "Validating SQL syntaxâ€¦"

    # Validate SQL file WITHOUT executing it
    - /opt/mssql-tools/bin/sqlcmd -S "$SQL_SERVER" -U "$SQL_USER" -P "$SQL_PASSWORD" -d "$SQL_DATABASE" -i "your_script.sql" -X

  only:
    - main
